mustache_x = 0;
mustache_y = 0;

function preload() {
    mustache = loadImage('data:image/png;base64,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');
}

function setup() {
    canvas = createCanvas(300, 300);
    canvas.center();
    video = createCapture(VIDEO);
    video.size(300, 300);
    video.hide();

    posenet = ml5.poseNet(video, modelloaded);
    posenet.on('pose', getposes);
}

function modelloaded() {
    console.log('Posenet is Intialized');
}

function getposes(results) {
    console.log("hi ");
    if (results.length > 0) {
        console.log(results);
        mustache_x = results[0].pose.nose.x - 15;
        mustache_y = results[0].pose.nose.y + 10;
    }
}

function draw() {
    image(video, 0, 0, 300, 300);
    image(mustache, mustache_x, mustache_y, 30, 30);
}

function takesnapshot() {
    save('savemypic.jpg');
}